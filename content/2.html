<!DOCTYPE html><html>
        <head>
        <title>CMSimfly</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link href="https://fonts.googleapis.com/css?family=Quicksand:300,400,500,700,900" rel="stylesheet">
        <link rel="stylesheet" href="./../static/chimper/fonts/icomoon/style.css">
        <link rel="stylesheet" href="./../static/chimper/css/bootstrap.min.css">
        <link rel="stylesheet" href="./../static/chimper/css/magnific-popup.css">
        <link rel="stylesheet" href="./../static/chimper/css/jquery-ui.css">
        <link rel="stylesheet" href="./../static/chimper/css/owl.carousel.min.css">
        <link rel="stylesheet" href="./../static/chimper/css/owl.theme.default.min.css">
        <link rel="stylesheet" href="./../static/chimper/css/bootstrap-datepicker.css">
        <link rel="stylesheet" href="./../static/chimper/fonts/flaticon/font/flaticon.css">
        <link rel="stylesheet" href="./../static/chimper/css/aos.css">
        <link rel="stylesheet" href="./../static/chimper/css/style.css">
        <link rel="shortcut icon" href="./../static/favicons.png">
        
        <style type='text/css'>
            .site-section {
            background-color: #FFFF;
            padding: 40px 40px;
            }
            body > div > div.dropdown.open {
                display: block;
            }
        </style>
    
        <!-- <script src="./../static/jquery.js"></script> -->
        <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
        <script src="../static/chimper/js/jquery-3.3.1.min.js"></script>
        <link rel="stylesheet" href="./../static/tipuesearch/css/normalize.min.css">
        <script src="./../static/tipuesearch/tipuesearch_set.js"></script>
        <script src="tipuesearch_content.js"></script>
        <link rel="stylesheet" href="./../static/tipuesearch/css/tipuesearch.css">
        <script src="./../static/tipuesearch/tipuesearch.js"></script>
        <script>
            /* original tipuesearch
            $(document).ready(function() {
                 $('#tipue_search_input').tipuesearch();
            });
            */
            // customed doSearch
            function doSearch() {
                $('#tipue_search_input').tipuesearch({
                    newWindow: true, 
                    minimumLength: 2,
                    wholeWords: false, // for search 中文
                });
            }
            $(document).ready(doSearch);
        </script>
        
<script type="text/javascript" src="./../static/syntaxhighlighter/shCore.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushJScript.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushJava.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushPython.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushSql.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushXml.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushPhp.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushLua.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushCpp.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushCss.js"></script>
<script type="text/javascript" src="./../static/syntaxhighlighter/shBrushCSharp.js"></script>
<link type="text/css" rel="stylesheet" href="./../static/syntaxhighlighter/css/shCoreDefault.css"/>
<script type="text/javascript">SyntaxHighlighter.all();</script>

<!-- for LaTeX equations 暫時不用
<script src="https://scrum-3.github.io/web/math/MathJax.js?config=TeX-MML-AM_CHTML" type="text/javascript"></script>
<script type="text/javascript">
init_mathjax = function() {
    if (window.MathJax) {
        // MathJax loaded
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
            },
            displayAlign: 'left', // Change this to 'center' to center equations.
            "HTML-CSS": {
                styles: {'.MathJax_Display': {"margin": 0}}
            }
        });
        MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }
}
init_mathjax();
</script>
-->
<!-- 暫時不用
<script src="./../static/fengari-web.js"></script>
<script type="text/javascript" src="./../static/Cango-13v08-min.js"></script>
<script type="text/javascript" src="./../static/CangoAxes-4v01-min.js"></script>
<script type="text/javascript" src="./../static/gearUtils-05.js"></script>
-->
<!-- for Brython 暫時不用
<script src="https://scrum-3.github.io/web/brython/brython.js"></script>
<script src="https://scrum-3.github.io/web/brython/brython_stdlib.js"></script>
-->

</head>
<body>
<div class='container'><nav>
        
    <div class="site-wrap">

    <div class="site-mobile-menu">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>
    
            <header class="site-navbar py-4 bg-white" role="banner">
              <div class="container-fluid">
                <div class="row align-items-center">
                <h1>50733113-陳志嘉個人網頁</h1>
                <div class="pl-4">
                    <form>
                    <input type="text" placeholder="Search" name="q" id="tipue_search_input" pattern=".{2,}" title="At least 2 characters" required>
                    </form>
                </div>
                  <!-- <div class="col-11 col-xl-2">
                    <h1 class="mb-0 site-logo"><a href="index.html" class="text-black h2 mb-0">50733113-陳志嘉個人網頁</a></h1> 
                  </div>
                  -->
                  <div class="col-12 col-md-10 d-none d-xl-block">
                    <nav class="site-navigation position-relative text-right" role="navigation">
    <ul class='site-menu js-clone-nav mr-auto d-none d-lg-block'>
                        <li class="active has-children"><a href="index.html">Home</a>
                        <ul class="dropdown">
                            <li><a href="sitemap.html">Site Map</a></li>
                            <li><a href="./../reveal/index.html">reveal</a></li>
                            <li><a href="./../blog/index.html">blog</a></li>
                        </ul>
                      </li>
                     <li><a href='首頁簡介.html'>首頁簡介</a><li class='has-children'><a href='課程內容.html'>課程內容</a><ul class='dropdown'><li class='has-children'><a href='校園免費授權.html'>校園免費授權</a><ul class='dropdown'><li><a href='windows 10.html'>windows 10</a></li></ul><li><a href='TWAREN SSL-VPN.html'>TWAREN SSL-VPN</a><li><a href='Ubuntu 18.04.html'>Ubuntu 18.04</a></li></ul><li class='has-children'><a href='ROC flag(w14).html'>ROC flag(w14)</a><ul class='dropdown'><li><a href='ROC Flag 成果.html'>ROC Flag 成果</a></li></ul><li class='has-children'><a href='程式.html'>程式</a><ul class='dropdown'><li><a href='亂數產生系統.html'>亂數產生系統</a><li><a href='骰子.html'>骰子</a><li><a href='繪圖.html'>繪圖</a><li><a href='2.html'>2</a></li></ul><li><a href='期中操作影片.html'>期中操作影片</a><li><a href='期末報告.html'>期末報告</a><li class='has-children'><a href='頁面資源.html'>頁面資源</a><ul class='dropdown'><li><a href='git http 與 ssh.html'>git http 與 ssh</a><li><a href='目錄結構.html'>目錄結構</a><li><a href='頁面編輯.html'>頁面編輯</a><li class='has-children'><a href='插入程式碼.html'>插入程式碼</a><ul class='dropdown'><li><a href='Java 程式碼.html'>Java 程式碼</a><li><a href='Python 程式碼.html'>Python 程式碼</a><li><a href='C或C++程式碼.html'>C或C++程式碼</a><li><a href='Lua 程式碼.html'>Lua 程式碼</a><li><a href='Javascript 程式碼.html'>Javascript 程式碼</a><li><a href='Html 原始碼.html'>Html 原始碼</a></li></ul><li><a href='網際簡報.html'>網際簡報</a><li><a href='網誌編輯.html'>網誌編輯</a><li><a href='已知錯誤.html'>已知錯誤</a></li>
                      </ul>
                </nav>
              </div>
              <div class="d-inline-block d-xl-none ml-md-0 mr-auto py-3" style="position: relative; top: 3px;"><a href="#" class="site-menu-toggle js-menu-toggle text-black"><span class="icon-menu h3"></span></a></div>
              </div>

            </div>
          </div>
          
        </header>
    <div id="tipue_search_content">繪圖 << <a href='繪圖.html'>Previous</a> <a href='期中操作影片.html'>Next</a> >> 期中操作影片<br /><h1>2</h1>
<p></p>
<!--
	NOTES:
	1. All tokens are represented by '$' sign in the template.
	2. You can write your code only wherever mentioned.
	3. All occurrences of existing tokens will be replaced by their appropriate values.
	4. Blank lines will be removed automatically.
	5. Remove unnecessary comments before creating your template.
-->
<p></p>
<p>Mario</p>
<!-- write your code here -->
<script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
<script src="./../static/ndgmr.Collision.js"></script>
<script src="/staticMario.js?1535289917509"></script>
<script>
var canvas, stage, exportRoot, anim_container, dom_overlay_container, fnStartAnimation;
function init() {
	canvas = document.getElementById("canvas");
	anim_container = document.getElementById("animation_container");
	dom_overlay_container = document.getElementById("dom_overlay_container");
	images = images||{};
	ss = ss||{};
	var loader = new createjs.LoadQueue(false);
	loader.addEventListener("fileload", handleFileLoad);
	loader.addEventListener("complete", handleComplete);
	loader.loadManifest(lib.properties.manifest);
}
function handleFileLoad(evt) {	
	if (evt.item.type == "image") { images[evt.item.id] = evt.result; }	
}
function handleComplete(evt) {
	//This function is always called, irrespective of the content. You can use the variable "stage" after it is created in token create_stage.
	var queue = evt.target;
	var ssMetadata = lib.ssMetadata;
	for(i=0; i<ssMetadata.length; i++) {
		ss[ssMetadata[i].name] = new createjs.SpriteSheet( {"images": [queue.getResult(ssMetadata[i].name)], "frames": ssMetadata[i].frames} )
	}
	exportRoot = new lib.Mario();
	stage = new createjs.Stage(canvas);
	stage.addChild(exportRoot);	

	const SPEED = 10;		//速度
	const ATTACK = 10;		//沒吃到金幣扣的血
	let isStart = false;	//是否點擊開始遊戲
	let Hp = 100;			//總血量
	let winNum = 0; 		//吃到的金幣數
	let Positions = 1;		//方向判斷
	let isKeydown = false;	//是否按下鍵盤

	//創造瑪莉歐
	var Mario = new lib.MarioUser();
	Mario.x = 356;
	Mario.y = 353;
	exportRoot.addChild(Mario);

	
	let loadint = 0;	//目前載入進度
	const sounds = [
		{src:"./assets/play.mp3", id:"play"},
		{src:"./assets/coin.mp3", id:"coin"},
		{src:"./assets/boom.mp3", id:"boom"},
		{src:"./assets/bg.mp3", id:"bg"},
	];
	createjs.Sound.alternateExtensions = ["mp3"];
	createjs.Sound.addEventListener("fileload", (e)=>{
		loadint++
		if(loadint === sounds.length){
			document.querySelector(".loading").style.display = 'none';
			bgAudio = createjs.Sound.play("bg", {loop:-1});
			bgAudio.volume = 0.2;
		}
	});
	createjs.Sound.registerSounds(sounds, "./");


	//每秒產生金幣
	let timeCoin = setInterval(()=>{
		if(!isStart) return; 
		let Coin = new lib.Coin();
		Coin.x = Math.floor(Math.random() * (670 - 30 + 1) + 30); //亂數 * (最大值 - 最小值 + 1) + 最小值
		Coin.y = -50;
		exportRoot.addChildAt(Coin, 1);
		
		createjs.Tween.get(Coin)
		.to({y: 400}, 2500)
		.call(()=>{
			console.log("金幣沒吃到");
			exportRoot.removeChild(Coin);
			Hp -= ATTACK;
			document.querySelector(".hp").style.width = `${Hp}%`;
		})
		.addEventListener("change", ()=>{
			let hit = ndgmr.checkRectCollision(Coin, Mario); //金幣跟瑪莉歐碰撞
			if(hit){
				createjs.Sound.play("coin")
				createjs.Tween.removeTweens(Coin); //移除金幣動畫
				exportRoot.removeChild(Coin); //移除金幣元件
				winNum ++;
				document.querySelector(".winNum").innerHTML = winNum;
			}
		})
	}, 1000)






	//遊戲開始按鈕
	document.querySelector(".gamePlayBtn").addEventListener("click", ()=>{
		createjs.Sound.play("play")
		isStart = true;
		document.querySelector(".gamePlayBtn").style.display = "none";
		window.addEventListener("keydown", keydownMoveFn);
		window.addEventListener("keyup", keyupMoveFn);
	})

	//遊戲重新開始
	document.querySelector(".resetPlay").addEventListener("click",()=>{
		window.location.reload();
	})

	function keydownMoveFn(e){
		if(isKeydown) return;
		if(e.keyCode===37 || e.keyCode===39){
			isKeydown = true;
			Positions = e.keyCode === 39 ? 1 : -1;
			Mario.gotoAndPlay("run");
		}
	}

	function keyupMoveFn(e){
		isKeydown = false;
		Mario.gotoAndPlay("stop");
	}


	createjs.Ticker.addEventListener("tick", tickFn)
	function tickFn(){
		if(Hp <= 0){
			clearInterval(timeCoin);
			createjs.Sound.play("boom")
			Mario.gotoAndPlay("del");
			document.querySelector(".over").style.display = "flex";
			window.removeEventListener("keydown", keydownMoveFn)
			window.removeEventListener("keyup", keyupMoveFn)
			createjs.Ticker.removeEventListener("tick", tickFn)
		}
		if(!isKeydown) return;
		Mario.x += SPEED * Positions;
		Mario.scaleX = Positions;

	}


	//Registers the "tick" event listener.
	fnStartAnimation = function() {
		createjs.Ticker.setFPS(lib.properties.fps);
		createjs.Ticker.addEventListener("tick", stage);
	}	    
	//Code to support hidpi screens and responsive scaling.
	function makeResponsive(isResp, respDim, isScale, scaleType) {		
		var lastW, lastH, lastS=1;		
		window.addEventListener('resize', resizeCanvas);		
		resizeCanvas();		
		function resizeCanvas() {			
			var w = lib.properties.width, h = lib.properties.height;			
			var iw = window.innerWidth, ih=window.innerHeight;			
			var pRatio = window.devicePixelRatio || 1, xRatio=iw/w, yRatio=ih/h, sRatio=1;			
			if(isResp) {                
				if((respDim=='width'&&lastW==iw) || (respDim=='height'&&lastH==ih)) {                    
					sRatio = lastS;                
				}				
				else if(!isScale) {					
					if(iw<w || ih<h)						
						sRatio = Math.min(xRatio, yRatio);				
				}				
				else if(scaleType==1) {					
					sRatio = Math.min(xRatio, yRatio);				
				}				
				else if(scaleType==2) {					
					sRatio = Math.max(xRatio, yRatio);				
				}			
			}			
			canvas.width = w*pRatio*sRatio;			
			canvas.height = h*pRatio*sRatio;
			canvas.style.width = dom_overlay_container.style.width = anim_container.style.width =  w*sRatio+'px';				
			canvas.style.height = anim_container.style.height = dom_overlay_container.style.height = h*sRatio+'px';
			stage.scaleX = pRatio*sRatio;			
			stage.scaleY = pRatio*sRatio;			
			lastW = iw; lastH = ih; lastS = sRatio;		
		}
	}
	makeResponsive(false,'both',false,1);	
	fnStartAnimation();
}
</script>
<!-- write your code here -->
<div id="app">
<div class="loading"></div>
<p class="winNum">0</p>
<a class="gamePlayBtn"><img alt="" src="./../static/mario/play.png"/></a>
<div class="over">
<div class="box"><img alt="" src="./../static/mario/gameover.png"/> <a class="resetPlay"><img alt="" src="./../static/mario/play.png"/></a></div>
</div>
</div>
<div class="hpBar">
<p>HP</p>
<div class="hpBox">
<div class="hp"></div>
</div>
</div>
<div id="animation_container" style="background-color: rgba(255, 255, 255, 0); width: 700px; height: 400px;"><canvas height="400" id="canvas" style="position: absolute; display: block; background-color: rgba(255, 255, 255, 0);" width="700"></canvas>
<div id="dom_overlay_container" style="pointer-events: none; overflow: hidden; width: 700px; height: 400px; position: absolute; left: 0px; top: 0px; display: block;"></div>
</div>
<br />繪圖 << <a href='繪圖.html'>Previous</a> <a href='期中操作影片.html'>Next</a> >> 期中操作影片</div>
        
    <!-- footer -->
      <div class="container">
        <div class="row pt-3 mx-auto">
            <p>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank" >Colorlib</a>
            <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
        </div>
      </div>
    <!-- for footer -->
    
        </div> <!-- for site wrap -->
            <!-- <script src="../static/chimper/js/jquery-3.3.1.min.js"></script> -->
            <script src="../static/chimper/js/jquery-migrate-3.0.1.min.js"></script>
            <script src="../static/chimper/js/jquery-ui.js"></script>
            <script src="../static/chimper/js/popper.min.js"></script>
            <script src="../static/chimper/js/bootstrap.min.js"></script>
            <script src="../static/chimper/js/owl.carousel.min.js"></script>
            <script src="../static/chimper/js/jquery.stellar.min.js"></script>
            <script src="../static/chimper/js/jquery.countdown.min.js"></script>
            <script src="../static/chimper/js/jquery.magnific-popup.min.js"></script>
            <script src="../static/chimper/js/bootstrap-datepicker.min.js"></script>
            <script src="../static/chimper/js/aos.js"></script>
            <!--
            <script src="../static/chimper/js/typed.js"></script>
                    <script>
                    var typed = new Typed('.typed-words', {
                    strings: ["Web Apps"," WordPress"," Mobile Apps"],
                    typeSpeed: 80,
                    backSpeed: 80,
                    backDelay: 4000,
                    startDelay: 1000,
                    loop: true,
                    showCursor: true
                    });
                    </script>
            -->
            <script src="../static/chimper/js/main.js"></script>
        </body></html>
        